<!-- Product Grid -->
<div class=" max-w-full mx-auto main-section">

</div>
<div class="py-6 px-4 max-w-[1300px] mx-auto">
<div class="">
    <!-- Search and Filters -->
    <div class="flex flex-col md:flex-row justify-between items-center gap-4 w-full ">
      <!-- Search Input -->
      <div class="flex items-center w-full md:w-auto border border-[#8080804a] bg-white rounded-[20px] focus:outline-none">
        <button class=" p-2 pl-[15px]">
          <i class="fas fa-search text-gray-600"></i>
        </button>
        <input type="text" placeholder="Search" class="w-full md:w-64 focus:outline-none text-sm"
          (input)="searchProducts($event)" />
        <button class="p-2 pr-[15px] leading-[0]">
          <i class="fas fa-filter text-gray-600"></i>
        </button>
      </div>

      <!-- Sort Dropdown -->
      <div class="relative w-full md:w-3xs">
        <details class="group relative w-full" #sortDropdown>
          <summary
            class="w-full p-2 pl-4 pr-[12px] border border-[#8080804a] rounded-[20px] bg-white text-sm cursor-pointer list-none flex items-center justify-between focus:outline-none"
          >
            <span>{{ sortLabel }}</span>
            <svg
              class="w-5 h-5 ml-2 transition-transform duration-200 group-open:rotate-180"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path d="M6 9L12 15L18 9" stroke="#1A2A49" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </summary>

          <ul
            class="absolute z-50 w-full bg-white border border-gray-200 rounded shadow mt-1 max-h-60 overflow-auto"
          >
            <li class="text-sm p-2 hover:bg-gray-100 cursor-pointer" (click)="selectSort('')">Sort by</li>
            <li class="text-sm p-2 hover:bg-gray-100 cursor-pointer" (click)="selectSort('price_asc')">Price: Low to High</li>
            <li class="text-sm p-2 hover:bg-gray-100 cursor-pointer" (click)="selectSort('price_desc')">Price: High to Low</li>
          </ul>
        </details>
      </div>

    </div>

  </div>

  <div class="mt-[20px]">
    <ng-container *ngIf="products && products.length > 0; else noProducts">
      <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
        @for (product of products; track product) {
          <app-product-card [product]="product" class="overflow-hidden"></app-product-card>
        }
      </div>
    </ng-container>
    <ng-template #noProducts>
      <div class="flex flex-col items-center justify-center py-20 bg-white rounded-xl shadow-md border border-gray-200">
        <img src="/no-products.webp" alt="No Products" class="w-32 h-32 mb-4 opacity-80" />
        <h3 class="text-2xl font-bold text-gray-700 mb-2">No Products Found</h3>
        <p class="text-gray-500 text-base mb-4">We couldn't find any products matching your search or filters.</p>
      </div>
    </ng-template>
  </div>
</div>
